{"version":3,"file":"index.esm.js","sources":["../../dist/graphql-live-query/src/GraphQLLiveDirective.js","../../dist/graphql-live-query/src/Maybe.js","../../dist/graphql-live-query/src/isLiveQueryOperationDefinitionNode.js","../../dist/graphql-live-query/src/rules/NoLiveMixedWithDeferStreamRule.js"],"sourcesContent":["import { GraphQLDirective, DirectiveLocation, GraphQLBoolean } from \"graphql\";\nexport const GraphQLLiveDirective = new GraphQLDirective({\n    name: \"live\",\n    description: \"Instruction for establishing a live connection that is updated once the underlying data changes.\",\n    locations: [DirectiveLocation.QUERY],\n    args: {\n        if: {\n            type: GraphQLBoolean,\n            defaultValue: true,\n            description: \"Whether the query should be live or not.\",\n        },\n    },\n});\n//# sourceMappingURL=GraphQLLiveDirective.js.map","export const isSome = (input) => input != null;\nexport const isNone = (input) => input == null;\n//# sourceMappingURL=Maybe.js.map","import { isSome, isNone } from \"./Maybe\";\nexport const isLiveQueryOperationDefinitionNode = (input, variables) => {\n    var _a, _b, _c, _d;\n    if (input.kind !== \"OperationDefinition\" || input.operation !== \"query\") {\n        return false;\n    }\n    const liveDirective = (_a = input.directives) === null || _a === void 0 ? void 0 : _a.find((d) => d.name.value === \"live\");\n    if (isNone(liveDirective)) {\n        return false;\n    }\n    const ifArgument = (_b = liveDirective.arguments) === null || _b === void 0 ? void 0 : _b.find((arg) => arg.name.value === \"if\");\n    if (isNone(ifArgument)) {\n        return true;\n    }\n    if (ifArgument.value.kind === \"BooleanValue\" &&\n        ifArgument.value.value === true) {\n        return true;\n    }\n    if (ifArgument.value.kind !== \"Variable\") {\n        return false;\n    }\n    if (isSome(variables) && isSome(variables[ifArgument.value.name.value])) {\n        return Boolean(variables[ifArgument.value.name.value]);\n    }\n    const variableName = ifArgument.value.name.value;\n    const variableNode = (_c = input.variableDefinitions) === null || _c === void 0 ? void 0 : _c.find((def) => def.variable.name.value === variableName);\n    if (((_d = variableNode === null || variableNode === void 0 ? void 0 : variableNode.defaultValue) === null || _d === void 0 ? void 0 : _d.kind) === \"BooleanValue\") {\n        return variableNode.defaultValue.value;\n    }\n    return false;\n};\n//# sourceMappingURL=isLiveQueryOperationDefinitionNode.js.map","import { GraphQLError } from \"graphql\";\nimport { isLiveQueryOperationDefinitionNode } from \"../isLiveQueryOperationDefinitionNode\";\nexport const NoLiveMixedWithDeferStreamRule = (context) => {\n    return {\n        OperationDefinition(operationDefinitionNode) {\n            if (isLiveQueryOperationDefinitionNode(operationDefinitionNode) === false) {\n                return false;\n            }\n        },\n        Directive(directiveNode) {\n            if (directiveNode.name.value === \"defer\" ||\n                directiveNode.name.value === \"stream\") {\n                context.reportError(new GraphQLError(`Cannot mix \"@${directiveNode.name.value}\" with \"@live\".`, directiveNode.name));\n            }\n        },\n    };\n};\n//# sourceMappingURL=NoLiveMixedWithDeferStreamRule.js.map"],"names":[],"mappings":"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"}